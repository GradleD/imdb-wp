<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Show - IMDBMovies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-900 text-white">
    <nav class="bg-yellow-500 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <img src="images/logo.png" alt="logo" class="w-32">
            <div class="space-x-4">
                <a href="index.html" class="hover:text-red-500">Home</a>
                <a href="movies.html" class="hover:text-red-500">Movies</a>
                <a href="tv-shows.html" class="hover:text-red-500">TV Shows</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 mt-8">
        <div id="tvDetails">
            <!-- Content will be loaded here -->
        </div>
    </main>

    <script>
        const tvId = new URLSearchParams(window.location.search).get('id');
        const API_KEY = 'c6ec2e09b4242cea749e54637f68a2a8';
        
        // Simple function to format date
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Fetch TV show details
        async function fetchTVShowDetails() {
            try {
                const response = await fetch(`https://api.themoviedb.org/3/tv/${tvId}?api_key=${API_KEY}&append_to_response=credits,videos`);
                const data = await response.json();
                renderTVShowDetails(data);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Render TV show details
        function renderTVShowDetails(show) {
            const trailer = show.videos?.results?.find(v => v.type === 'Trailer');
            
            document.getElementById('tvDetails').innerHTML = `
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="w-full md:w-1/3">
                        <img src="${show.poster_path ? `https://image.tmdb.org/t/p/w500${show.poster_path}` : 'https://via.placeholder.com/500x750?text=No+Poster'}" 
                             alt="${show.name}" 
                             class="w-full rounded shadow-lg">
                    </div>
                    <div class="w-full md:w-2/3">
                        <h1 class="text-3xl font-bold mb-2">${show.name}</h1>
                        <div class="flex items-center gap-4 mb-4">
                            <span class="px-2 py-1 bg-red-600 rounded">${show.vote_average?.toFixed(1) || 'N/A'}</span>
                            <span>${show.number_of_seasons} Seasons</span>
                            <span>${show.episode_run_time?.[0] || 'N/A'} min</span>
                        </div>
                        <p class="text-gray-300 mb-6">${show.overview || 'No overview available.'}</p>
                        ${trailer ? `
                            <button onclick="window.open('https://youtube.com/watch?v=${trailer.key}', '_blank')" 
                                    class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-md font-semibold">
                                <i class="fas fa-play mr-2"></i> Watch Trailer
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', fetchTVShowDetails);
    </script>
</body>
</html>